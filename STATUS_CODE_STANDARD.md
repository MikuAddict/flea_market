# 项目状态码规范文档

## 概述
本规范定义了项目中所有接口返回状态码的统一格式，采用三位数字表示，确保整个项目中的状态码格式保持一致。

## 状态码分类

### 2xx 成功类状态码
| 状态码 | 含义 | 使用场景 |
|--------|------|----------|
| 200 | 成功 | 所有成功的业务操作，如查询成功、操作成功等 |

### 4xx 客户端错误类状态码
| 状态码 | 含义 | 使用场景 |
|--------|------|----------|
| 400 | 请求参数错误 | 参数校验失败、格式错误、必填参数缺失等 |
| 401 | 未登录 | 需要登录但未提供有效认证信息 |
| 402 | 用户余额不足 | 用户余额不足，无法完成操作（如调用AI服务） |
| 403 | 无权限 | 用户权限不足，无法访问资源 |
| 404 | 请求数据不存在 | 请求的资源不存在 |
| 405 | 禁止访问 | 访问被明确禁止（如违禁操作） |
| 422 | 包含违禁词 | 用户输入包含违禁词，需要修改内容 |

### 5xx 服务器错误类状态码
| 状态码 | 含义 | 使用场景 |
|--------|------|----------|
| 500 | 系统内部异常 | 服务器内部错误、数据库异常等 |
| 501 | 操作失败 | 业务操作失败，如数据更新失败等 |

## 详细说明

### 200 - 成功 (SUCCESS)
- **含义**: 请求成功处理
- **使用场景**: 
  - 查询操作成功
  - 创建、更新、删除操作成功
  - 所有正常业务逻辑执行成功

### 400 - 请求参数错误 (PARAMS_ERROR)
- **含义**: 客户端请求参数有误
- **使用场景**:
  - 参数格式错误（如数字格式、日期格式）
  - 必填参数缺失
  - 参数值超出允许范围
  - 参数校验规则不满足

### 401 - 未登录 (NOT_LOGIN_ERROR)
- **含义**: 需要用户登录但未提供有效认证
- **使用场景**:
  - 访问需要登录的接口
  - Token过期或无效
  - 认证信息缺失

### 402 - 用户余额不足 (USER_BALANCE_NOT_ENOUGH)
- **含义**: 用户账户余额不足以完成操作
- **使用场景**:
  - 调用付费服务时余额不足
  - 进行交易操作时资金不足

### 403 - 无权限 (NO_AUTH_ERROR)
- **含义**: 用户权限不足，无法访问资源
- **使用场景**:
  - 访问超出用户权限的资源
  - 执行超出用户权限的操作
  - 角色权限限制

### 404 - 请求数据不存在 (NOT_FOUND_ERROR)
- **含义**: 请求的资源不存在
- **使用场景**:
  - 查询不存在的用户、商品、订单等
  - 访问不存在的URL路径
  - 资源已被删除

### 405 - 禁止访问 (FORBIDDEN_ERROR)
- **含义**: 访问被明确禁止
- **使用场景**:
  - 违反业务规则的访问
  - 黑名单用户访问
  - 系统维护期间访问

### 422 - 包含违禁词 (WORD_FORBIDDEN_ERROR)
- **含义**: 用户输入包含违禁词
- **使用场景**:
  - 发布内容包含敏感词
  - 评论内容违规
  - 用户昵称包含非法字符

### 500 - 系统内部异常 (SYSTEM_ERROR)
- **含义**: 服务器内部错误
- **使用场景**:
  - 数据库连接异常
  - 文件系统错误
  - 第三方服务异常
  - 未预期的系统异常

### 501 - 操作失败 (OPERATION_ERROR)
- **含义**: 业务操作执行失败
- **使用场景**:
  - 数据更新冲突
  - 业务逻辑执行失败
  - 数据完整性约束违反

## 使用示例

### 成功响应示例
```json
{
    "code": 200,
    "data": {
        "id": 1,
        "name": "示例数据"
    },
    "message": "ok"
}
```

### 错误响应示例
```json
{
    "code": 400,
    "data": null,
    "message": "请求参数错误"
}
```

## 最佳实践

1. **一致性**: 所有接口必须使用本规范定义的状态码
2. **语义明确**: 状态码应该准确反映业务场景
3. **错误信息**: 错误消息应该清晰明了，便于前端展示
4. **日志记录**: 重要的错误状态码应该在服务端记录日志
5. **前端处理**: 前端应根据不同状态码采取相应的用户提示和操作

## 注意事项

- 状态码200仅用于表示业务操作成功，HTTP状态码仍保持200
- 所有业务错误都应通过`code`字段返回，HTTP状态码保持200
- 状态码设计遵循RESTful API设计原则
- 新增业务场景时，应优先使用现有状态码，如需新增需更新本文档